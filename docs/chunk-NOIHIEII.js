import{C as s,e as r,fa as d,h as c,k as a,la as n,n as u}from"./chunk-I7QWZ5B3.js";var h=class o{constructor(t){this.http=t;this.rehydrateDataFromLocalStorage()}apisBasePath="assets";productsListSource=s([]);categoriesList$=s([]);filters=s({searchKey:s(""),categoryId:s("")});displayedProductsList=d(()=>this.productsListSource().filter(t=>{let e=this.filters().searchKey()?t.name.toLowerCase().includes(this.filters().searchKey().toLowerCase()):!0,i=this.filters().categoryId()?t.categoryId===this.filters().categoryId():!0;return e&&i}));getCategories(){return this.categoriesList$()?.length?r(this.categoriesList$()):this.http.get(`${this.apisBasePath}/categories.json`).pipe(c(t=>{this.categoriesList$.set(t)}))}getProducts(){return this.productsList?.length?r():this.http.get(`${this.apisBasePath}/products.json`).pipe(c(t=>{t.length&&(this.productsListSource.set(t),localStorage.setItem("Products",JSON.stringify(t)))}))}getProductById(t){let e=this.productsList?.find(i=>i.id===t);return e?r(e):r(null)}addNewProduct(t){let e=[...this.productsList];return e.push(t),this.productsListSource.set(e),r(!0)}updateProduct(t,e){let i=this.productsList.findIndex(p=>p.id===e);return i>-1?(this.productsList[i]=t,this.productsListSource.set([...this.productsList]),r(!0)):r(!1)}deleteProduct(t){return this.productsList.splice(t,1),this.productsListSource.set([...this.productsList]),r(!0)}searchOnProducts(t){this.filters().searchKey.set(t)}filterProductsBasedOnCategory(t){this.filters().categoryId.set(t)}rehydrateDataFromLocalStorage(){this.productsList.length||this.productsListSource.set(JSON.parse(localStorage.getItem("Products")))}resetFilter(){this.filters.set({searchKey:s(""),categoryId:s("")})}get productsList(){return this.productsListSource()??[]}get displayedProducts(){return this.displayedProductsList()??[]}static \u0275fac=function(e){return new(e||o)(u(n))};static \u0275prov=a({token:o,factory:o.\u0275fac})};export{h as a};
